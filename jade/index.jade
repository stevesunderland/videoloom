html
	head
		title Resilience
		link(rel='stylesheet' href='app.css')
		link(rel="icon" type="image/png" href="icon.png" sizes="192x192")
		link(rel="apple-touch-icon" href="icon.png" sizes="180x180")
	body
		//- home button
		.logo
			for i in [1,2,3]
				div.bar
		//- loom
		each i, loomindex in loom
			div.header(class=i.name)
				.title &nbsp;
				.buttons
					each t, threadindex in i.threads
						.link(class=t.name, data-column=(loomindex == 0 ? threadindex : null) data-row=(loomindex == 0 ? null : (i.threads.length - threadindex))) #{t.name}
			each t, index in i.threads
				div.thread(class=t.name, data-column=(loomindex == 0 ? index : null ), data-row=(loomindex == 0 ? null : index))
					video(loop, muted)
						//- source(src=t.clip)
		//- grid
		- var xthreads = loom[0].threads
		- var ythreads = loom[1].threads
		each x, xindex in xthreads
			each y, yindex in ythreads
				.grid(data-column=xindex, data-row=yindex)
		//- haikus --- add the markup here and then lazy load?
		for axis in loom
			for thread in axis.threads
				div.haiku(class=thread.name)
					.title= thread.name
					each haiku, index in thread.haiku
						.slide
							div.panel.sidebar(data-bg=('img/haiku/'+thread.name+'-'+(index+1)+'a.jpg'))
							div.panel.image(data-bg=('img/haiku/'+thread.name+'-'+(index+1)+'.jpg'))
							div.panel.text
								p!= haiku.text
								h6= haiku.caption
		//- footer
		.header.bottom
			button#playButton Play Sequence
		//- intro modal
		div#intro
			//- .table
				//- .cell
			for item in intro
				.slide !{item.text}
			button(class='introbutton') Skip Intro
		//- Bio Page
		div#bio
			.inner
				p [Bio Page Coming Soon]
		//- video modal
		div#video
		//- script
		script(src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js')
		script(src='//f.vimeocdn.com/js/froogaloop2.min.js')
		script(src='js/t.js')
		script(src='app.js')